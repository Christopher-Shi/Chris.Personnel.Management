@page "/user"
@using System.Text.Json

@* 查询区 *@
<div>
    <Row>
        <Col Span="5">
        <Input Placeholder="用户名" Value="@txtValue" />
        </Col>
        <Col Span="1"></Col>
        <Col Span="5">
        <Input Placeholder="真实姓名" Value="@txtValue" />
        </Col>
        <Col Span="1"></Col>
        <Col Span="5">
        <Select Placeholder="启用状态" Style="width: 100%">
            <SelectOption Value="1" Title="启用">启用</SelectOption>
            <SelectOption Value="0" Title="停用">停用</SelectOption>
        </Select>
        </Col>
        <Col Span="1"></Col>
        <Col Span="6">
        <Button Type="primary" Icon="search">查询</Button>
        <Button Type="primary" Icon="sync">重置</Button>
        </Col>
    </Row>
</div>
<Divider />
<div>
    <Button Type="primary" Icon="plus" OnClick="@ShowAddModal">新增</Button>
</div>
<Divider />
@* Table表格区 *@
<Table DataSource="@Users">
    <Column @bind-Field="@context.Name">
        <a>@context.Name</a>
    </Column>
    <Column @bind-Field="@context.TrueName"></Column>
    <Column @bind-Field="@context.CardId"></Column>
    <Column @bind-Field="@context.Phone"></Column>
    <Column @bind-Field="@context.Gender"></Column>
    <Column @bind-Field="@context.IsEnabled"></Column>
    <ActionColumn Title="操作">
        <div>
            <Button Type="link" OnClick="@ShowEditModal">
                编辑
            </Button>
            @*<Divider Type="vertical" />*@
            <Button Type="link" OnClick="@HandleConfirm">
                删除
            </Button>
        </div>
    </ActionColumn>
</Table>

@* 新增模态框 *@
<Modal Title="@("新增")"
       Visible="@_addModalVisible"
       BodyStyle="text-align: center;"
       OnOk="@HideAddModal"
       OnCancel="@HideAddModal"
       OkText="@("确认")"
       CancelText="@("取消")">
    <Form Model="@UserAddUICommand"
          LabelCol="new ColLayoutParam { Span = 8 }"
          WrapperCol="new ColLayoutParam { Span = 16 }"
          OnFinish="OnFinish"
          OnFinishFailed="OnFinishFailed">
        <FormItem Label="用户名">
            <Input @bind-Value="@UserAddUICommand.User.UserName" />
        </FormItem>
        <FormItem Label="真实姓名">
            <Input @bind-Value="@UserAddUICommand.User.TrueName" />
        </FormItem>
        <FormItem Label="性别">
            <RadioGroup @bind-Value="@UserAddUICommand.User.Gender" Name="chris1">
                <Radio Value="@("1")">男</Radio>
                <Radio Value="@("0")">女</Radio>
            </RadioGroup>
        </FormItem>
        <FormItem Label="身份证号码">
            <Input @bind-Value="@UserAddUICommand.User.CardId" />
        </FormItem>
        <FormItem Label="电话号码">
            <Input @bind-Value="@UserAddUICommand.User.Phone" />
        </FormItem>
        <FormItem Label="状态">
            <RadioGroup @bind-Value="@UserAddUICommand.User.IsEnabled" Name="chris">
                <Radio Value="@("1")">启用</Radio>
                <Radio Value="@("0")">停用</Radio>
            </RadioGroup>
        </FormItem>
        @*<FormItem>
            <Button Type="primary" HtmlType="submit">
                保存
            </Button>
        </FormItem>*@
    </Form>
</Modal>

@* 编辑模态框 *@
<Modal Title="@("编辑")"
       Visible="@_editModalVisible"
       OnOk="@HideEditModal"
       OnCancel="@HideEditModal"
       OkText="@("确认")"
       CancelText="@("取消")">
    <p>Edit</p>
    <p>Some contents...</p>
    <p>Some contents...</p>
</Modal>


@code{
    private async Task HandleConfirm()
    {
        await ModalService.Confirm(new ConfirmOptions
        {
            Title = "确认",
            Icon = @<Icon Type="exclamation-circle" Theme="Outline"></Icon>,
            Content = "确认删除",
            OkText = "确认",
            CancelText = "取消"
        });
    }
}
